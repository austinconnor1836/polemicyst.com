services:
  backend:
    build: ./backend
    ports:
      - '3001:3001'
    volumes:
      - ./backend/uploads:/app/uploads

  faster-whisper:
    image: lscr.io/linuxserver/faster-whisper:latest
    container_name: faster-whisper
    environment:
      - TZ=Etc/UTC
      - WHISPER_MODEL=tiny-int8
      - WHISPER_LANG=en
    volumes:
      - ./faster-whisper-data:/config
    ports:
      - '10300:10300'
    restart: unless-stopped

  ollama:
    build:
      context: ./backend
      dockerfile: ollama.Dockerfile
    container_name: ollama
    volumes:
      - ./backend/scripts/start-ollama.sh:/start.sh
      - ollama-data:/root/.ollama
    entrypoint: ["/bin/bash", "/start.sh"]
    ports:
      - "11434:11434"
    restart: unless-stopped



volumes:
  ollama-data: